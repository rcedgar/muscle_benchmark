#!/bin/bash -e

test_msa=$1
files=$2

if [ x$files == x ] ; then
	echo $0: missing arg >> /dev/stderr
	exit 1
fi

if [ ! -s $ref_msa ] ; then
	echo Not found test_msa=$ref_msa >> /dev/stderr
fi

if [ ! -s $files ] ; then
	echo Not found files=$files >> /dev/stderr
fi

foldmason=/z/sw/foldmason/foldmason/bin/foldmason

tmpdir=/tmp/foldmason_tmp
pdbdir=/tmp/foldmason_pdbdir

rm -rf $tmpdir $pdbdir
mkdir -p $tmpdir $pdbdir

cp -v `cat $files` \
  $pdbdir

cp -v $test_msa \
  $tmpdir/msa.fa

cd $tmpdir
$foldmason createdb $pdbdir tmpdb
$foldmason msa2lddt tmpdb msa.fa
